<div class="favoritos-container">
  <header class="consulta-header">
    <div class="header-content">
      <h2>Meus Favoritos</h2>
      <nav class="header-nav">
        <button
          class="nav-button"
          routerLink="/search"
          routerLinkActive="active"
        >
          <span class="material-icons">home</span>
          Início
        </button>
        <button
          class="nav-button"
          routerLink="/profile"
          routerLinkActive="active"
        >
          <span class="material-icons">people</span>
          Perfil
        </button>
      </nav>
    </div>
  </header>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Carregando favoritos...</p>
  </div>

  <div *ngIf="!loading && favoritos.length === 0" class="no-results">
    <span class="material-icons">favorite_border</span>
    <p>Nenhum favorito encontrado.</p>
  </div>

  <div class="favoritos-grid" *ngIf="!loading && favoritos.length > 0">
    <div
      class="favorito-card"
      *ngFor="let fav of favoritos"
      [ngClass]="fav.disponivel ? 'statusDisponivel' : 'statusIndisponivel'"
    >
      <div class="card-header">
        <h3>{{ fav.medicamentoNome }}</h3>
        <button
          class="remove-button"
          (click)="removerFavorito(fav.id)"
          title="Remover dos favoritos"
        >
          <span class="material-icons">delete</span>
        </button>
      </div>

      <div class="card-body">
        <p><strong>Farmácia:</strong> {{ fav.farmaciaNome || "-" }}</p>
        <p>
          <strong>Disponibilidade:</strong>
          {{ fav.disponivel ? "Disponível" : "Indisponível" }}
        </p>
        <p *ngIf="fav.quantidadeEstoque !== undefined">
          <strong>Quantidade em estoque:</strong> {{ fav.quantidadeEstoque }}
        </p>
      </div>

      <button
        class="detalhes-button"
        (click)="fav.showDetalhes = !fav.showDetalhes"
      >
        {{ fav.showDetalhes ? "Ocultar Detalhes" : "Ver Detalhes" }}
      </button>

      <div *ngIf="fav.showDetalhes" class="detalhes">
        <p><strong>Princípio Ativo:</strong> {{ fav.principioAtivo || "-" }}</p>
        <p><strong>Data de cadastro:</strong> {{ fav.data_cadastro || "-" }}</p>
        <p><strong>Descrição:</strong> {{ fav.descricao || "-" }}</p>
        <p><strong>Categoria:</strong> {{ fav.categoria || "-" }}</p>
      </div>
    </div>
  </div>
</div>
